<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>教师工作台 - Anotherview 编程实训平台</title>
    <meta http-equiv="Cache-Control" content="no-store, no-cache, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
</head>
<body>

<div>
    <h1>教师工作台</h1>
    <div class="user-info">
        欢迎, <span id="username">教师</span> | <a href="#" onclick="logout()">退出登录</a>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js"></script>
<script>
    $(document).ready(function () {
        $.get("/Anotherview/api/teacherInfo", function (teacher) {
            if (teacher && teacher.name) {
                $("#username").text(teacher.name);
            } else {
                $("#username").text("未知教师");
            }
        }).fail(() => {
            alert("无法获取教师信息，请重新登录。");
            window.location.href = "/Anotherview/html/teacher/teacher-login.html";
        });
    });

    function logout() {
        $.post("/Anotherview/api/teacherLogout", function () {
            alert("已退出登录");
            window.location.href = "/Anotherview/html/teacher/teacher-login.html";
        }).fail(() => {
            alert("退出失败");
        });
    }
</script>

</body>
</html>